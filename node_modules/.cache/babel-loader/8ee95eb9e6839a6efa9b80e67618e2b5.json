{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const fetchTickets = createAsyncThunk('tickets/fetchTickets', async () => {\n  const response = await fetch('https://api.npoint.io/163b5e66df9f2741243e');\n  const formattedResponse = await response.json();\n  return formattedResponse;\n});\nexport const ticketsSlice = createSlice({\n  name: 'tickets',\n  initialState: {\n    tickets: [],\n    isLoading: false,\n    isChanged: false\n  },\n  reducers: {\n    chooseCheap(state) {\n      if (state.isChanged) {\n        state.isChanged = !state.isChanged;\n        state.tickets.sort((prev, next) => prev.price - next.price);\n        console.log(state.isChanged);\n      } else {\n        state.isChanged = !state.isChanged;\n        fetchTickets();\n        state.tickets.sort((prev, next) => prev.price - next.price);\n        console.log(state.isChanged);\n      }\n    },\n\n    chooseFast(state) {\n      // if(state.isChanged) {\n      //     state.isChanged = !state.isChanged;\n      //     state.tickets.sort((prev, next) => prev.info.duration < next.info.duration ? -1 : 1);\n      //     console.log(state.isChanged);\n      // } else {\n      //     state.isChanged = !state.isChanged;\n      //     fetchTickets();\n      //     state.tickets.sort((prev, next) => prev.info.duration < next.info.duration ? -1 : 1);\n      //     console.log(state.isChanged);\n      // }\n      state.tickets.sort((prev, next) => prev.info.duration < next.info.duration ? -1 : 1);\n    },\n\n    chooseOptimal(state) {\n      if (state.isChanged) {\n        state.isChanged = !state.isChanged;\n        state.tickets.sort((prev, next) => prev.price < next.price ? 1 : -1).sort((prev, next) => prev.info.duration < next.info.duration ? 1 : -1);\n        console.log(state.isChanged);\n      } else {\n        state.isChanged = !state.isChanged;\n        fetchTickets();\n        state.tickets.sort((prev, next) => prev.price < next.price ? 1 : -1).sort((prev, next) => prev.info.duration < next.info.duration ? 1 : -1);\n        console.log(state.isChanged);\n      }\n    },\n\n    chooseTrans(state, payload) {\n      state.tickets.filter(item => item.info.stops.length === 2);\n      console.log(state);\n    }\n\n  },\n  extraReducers: {\n    [fetchTickets.pending]: state => {\n      state.isLoading = true;\n    },\n    [fetchTickets.fulfilled]: (state, action) => {\n      state.tickets = action.payload;\n      state.isLoading = false;\n    },\n    [fetchTickets]: state => {\n      state.isLoading = false;\n    },\n    [fetchTickets]: state => {\n      state.tickets.forEach(item => {\n        let unix = item.info.duration;\n        let date = new Intl.DateTimeFormat('en-US', {\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit'\n        }).format(unix); //9:27:16 PM\n\n        console.log(date);\n      });\n    }\n  }\n});\nexport default ticketsSlice.reducer;\nexport const {\n  chooseCheap,\n  chooseFast,\n  chooseOptimal,\n  chooseTrans\n} = ticketsSlice.actions;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchTickets","response","fetch","formattedResponse","json","ticketsSlice","name","initialState","tickets","isLoading","isChanged","reducers","chooseCheap","state","sort","prev","next","price","console","log","chooseFast","info","duration","chooseOptimal","chooseTrans","payload","filter","item","stops","length","extraReducers","pending","fulfilled","action","forEach","unix","date","Intl","DateTimeFormat","hour","minute","second","format","reducer","actions"],"sources":["/Users/artiomdeyev/Desktop/aviasales/src/ticketsState.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nexport const fetchTickets = createAsyncThunk(\n    'tickets/fetchTickets',\n    async () => {\n        const response = await fetch('https://api.npoint.io/163b5e66df9f2741243e');\n        const formattedResponse = await response.json();\n        return formattedResponse;\n    }   \n)\n\nexport const ticketsSlice = createSlice({\n    name: 'tickets',\n    initialState: {\n        tickets: [],\n        isLoading: false,\n        isChanged: false,\n    },\n    reducers: {\n        chooseCheap(state) {\n            if(state.isChanged) {\n                state.isChanged = !state.isChanged;\n                state.tickets.sort((prev, next) => prev.price - next.price);\n                console.log(state.isChanged);\n            } else {\n                state.isChanged = !state.isChanged;\n                fetchTickets();\n                state.tickets.sort((prev, next) => prev.price - next.price);\n                console.log(state.isChanged);\n            }\n        },\n        chooseFast(state) {\n            // if(state.isChanged) {\n            //     state.isChanged = !state.isChanged;\n            //     state.tickets.sort((prev, next) => prev.info.duration < next.info.duration ? -1 : 1);\n            //     console.log(state.isChanged);\n            // } else {\n            //     state.isChanged = !state.isChanged;\n            //     fetchTickets();\n            //     state.tickets.sort((prev, next) => prev.info.duration < next.info.duration ? -1 : 1);\n            //     console.log(state.isChanged);\n            // }\n\n            state.tickets.sort((prev, next) => prev.info.duration < next.info.duration ? -1 : 1);\n        },\n        chooseOptimal(state) {\n            if(state.isChanged) {\n                state.isChanged = !state.isChanged;         \n                state.tickets.sort((prev, next) => prev.price < next.price ? 1 : -1).sort((prev, next) => prev.info.duration < next.info.duration ? 1 : -1);\n                console.log(state.isChanged);\n            } else {\n                state.isChanged = !state.isChanged;\n                fetchTickets();\n                state.tickets.sort((prev, next) => prev.price < next.price ? 1 : -1).sort((prev, next) => prev.info.duration < next.info.duration ? 1 : -1);\n                console.log(state.isChanged);\n            }\n        },\n        chooseTrans(state, payload) {\n            state.tickets.filter(item => item.info.stops.length === 2);\n            console.log(state);\n        }\n    },\n    extraReducers: {\n        [fetchTickets.pending]: (state) => {\n            state.isLoading = true;\n        },\n        [fetchTickets.fulfilled]: (state, action) => {\n            state.tickets = action.payload;\n            state.isLoading = false;\n        },\n        [fetchTickets]: (state) => {\n            state.isLoading = false;\n        },\n        [fetchTickets]: (state) => {\n            state.tickets.forEach(item => {\n                let unix = item.info.duration;\n                let date = new Intl.DateTimeFormat('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' }).format(unix)//9:27:16 PM\n                console.log(date);\n            })\n        }\n    }\n});\n\nexport default ticketsSlice.reducer;\n\nexport const { chooseCheap, chooseFast, chooseOptimal, chooseTrans } = ticketsSlice.actions;"],"mappings":"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"},"metadata":{},"sourceType":"module"}